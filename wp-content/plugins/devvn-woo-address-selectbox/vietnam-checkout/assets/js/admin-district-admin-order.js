!function(e,n){e(document).ready(function(){var n={formatNoMatches:admin_vncheckout_array.formatNoMatches},t=loading_shipping=!1;e("#_billing_state").select2(n),e("#_billing_city").select2(n),e("#_billing_address_2").select2(n),e("body").on("select2:select","#_billing_state",function(n){e("#_billing_city option").val("");var a=n.val;a||(a=e("body #_billing_state option:selected").val()),a&&!t&&(t=!0,e.ajax({type:"post",dataType:"json",url:admin_vncheckout_array.get_address,data:{action:"load_diagioihanhchinh",matp:a},context:this,beforeSend:function(){e("#_billing_city,#_billing_address_2").html("").select2();var n=new Option("Loading...","");e("#_billing_city, #_billing_address_2").append(n)},success:function(n){t=!1,e("#_billing_city,#_billing_address_2").html("").select2();var a=new Option("Chọn xã/phường/thị trấn","");if(e("#_billing_address_2").append(a),n.success){var i=n.data;a=new Option("Chọn quận/huyện",""),e("#_billing_city").append(a),e.each(i,function(n,t){a=new Option(t.name,t.maqh),e("#_billing_city").append(a)})}}}))}),e("body").on("change select2-selecting","#_billing_city",function(t){var a=t.val;a||(a=e("#_billing_city option:selected").val()),a&&e.ajax({type:"post",dataType:"json",url:admin_vncheckout_array.get_address,data:{action:"load_diagioihanhchinh",maqh:a},context:this,beforeSend:function(){e("#_billing_address_2").html("").select2();var n=new Option("Loading...","");e("#_billing_address_2").append(n)},success:function(t){if(e("#_billing_address_2").html("").select2(n),t.success){var a=t.data,i=new Option("Chọn xã/phường/thị trấn","");e("#_billing_address_2").append(i),e.each(a,function(n,t){var a=new Option(t.name,t.xaid);e("#_billing_address_2").append(a)})}}})}),e("#_shipping_state").select2(n),e("#_shipping_city").select2(n),e("#_shipping_address_2").select2(n),e("body").on("select2:select","#_shipping_state",function(n){e("#_shipping_city option").val("");var t=n.val;t||(t=e("#_shipping_state option:selected").val()),t&&!loading_shipping&&(loading_shipping=!0,e.ajax({type:"post",dataType:"json",url:admin_vncheckout_array.get_address,data:{action:"load_diagioihanhchinh",matp:t},context:this,beforeSend:function(){e("#_shipping_city,#_shipping_address_2").html("").select2();var n=new Option("Loading...","");e("#_shipping_city, #_shipping_address_2").append(n)},success:function(n){loading_shipping=!1,e("#_shipping_city,#_shipping_address_2").html("").select2();var t=new Option("Chọn xã/phường/thị trấn","");if(e("#_shipping_address_2").append(t),n.success){var a=n.data;t=new Option("Chọn quận/huyện","");e("#_shipping_city").append(t),e.each(a,function(n,t){var a=new Option(t.name,t.maqh);e("#_shipping_city").append(a)})}}}))}),e("body").on("change select2-selecting","#_shipping_city",function(t){var a=t.val;a||(a=e("#_shipping_city option:selected").val()),a&&e.ajax({type:"post",dataType:"json",url:admin_vncheckout_array.get_address,data:{action:"load_diagioihanhchinh",maqh:a},context:this,beforeSend:function(){e("#_shipping_address_2").html("").select2();var n=new Option("Loading...","");e("#_shipping_address_2").append(n)},success:function(t){if(e("#_shipping_address_2").html("").select2(n),t.success){var a=t.data,i=new Option("Chọn xã/phường/thị trấn","");e("#_shipping_address_2").append(i),e.each(a,function(n,t){var a=new Option(t.name,t.xaid);e("#_shipping_address_2").append(a)})}}})});var a=!1;e("body").on("click",".update_country",function(){if(a)return!1;var n=e(this).closest("td"),t=e(".ajax_mess",n),i=e(this).data("nonce");return e.ajax({type:"post",dataType:"json",url:admin_vncheckout_array.ajaxurl,data:{action:"ghtk_update_country",nonce:i},context:this,beforeSend:function(){t.html("Đang chạy..."),a=!0},success:function(e){e.success?t.css("color","green").html(e.data):t.css("color","red").html(e.data),a=!1},error:function(e,n,i){t.css("color","red").html("Có lỗi xảy ra!"),a=!1}}),!1}),e("#woocommerce_store_city").select2(n),e("#woocommerce_store_address_2").select2(n),e("body").on("change select2-selecting",'select[name="woocommerce_default_country"]',function(n){e("#woocommerce_store_city option").val("");var a=n.val;a||(a=e("option:selected",this).val()),a&&!t&&(a=a.split(":"))[1]&&(a=a[1],t=!0,e.ajax({type:"post",dataType:"json",url:admin_vncheckout_array.get_address,data:{action:"load_diagioihanhchinh",matp:a},context:this,beforeSend:function(){e("#woocommerce_store_city,#woocommerce_store_address_2").html("").select2();var n=new Option("Loading...","");e("#woocommerce_store_city,#woocommerce_store_address_2").append(n)},success:function(n){t=!1,e("#woocommerce_store_city,#woocommerce_store_address_2").html("").select2();var a=new Option("Chọn xã/phường/thị trấn","");if(e("#woocommerce_store_address_2").append(a),n.success){var i=n.data;a=new Option("Chọn quận/huyện",""),e("#woocommerce_store_city").append(a),e.each(i,function(n,t){a=new Option(t.name,t.maqh),e("#woocommerce_store_city").append(a)})}}})),console.log(e(this).val())}),e("body").on("change select2-selecting","#woocommerce_store_city",function(t){var a=t.val;a||(a=e("option:selected",this).val()),a&&e.ajax({type:"post",dataType:"json",url:admin_vncheckout_array.get_address,data:{action:"load_diagioihanhchinh",maqh:a},context:this,beforeSend:function(){e("#woocommerce_store_address_2").html("").select2();var n=new Option("Loading...","");e("#woocommerce_store_address_2").append(n)},success:function(t){if(e("#woocommerce_store_address_2").html("").select2(n),t.success){var a=t.data,i=new Option("Chọn xã/phường/thị trấn","");e("#woocommerce_store_address_2").append(i),e.each(a,function(n,t){var a=new Option(t.name,t.xaid);e("#woocommerce_store_address_2").append(a)})}}})}),e(".button_create_tables").on("click",function(){let n=e(this),t=e(this).closest(".notice"),a=e(this).data("nonce");return e.ajax({type:"post",dataType:"json",url:admin_vncheckout_array.ajaxurl,data:{action:"vnaddress_create_table",security:a},context:this,beforeSend:function(){n.html("Đang cấu hình...")},success:function(e){e.success?(t.remove(),alert(e.data)):alert(e.data)},error:function(e,n,t){alert(n)}}),!1})})}(jQuery,wp);