!function(r){var o={};function n(e){if(o[e])return o[e].exports;var t=o[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=r,n.c=o,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=45)}([function(e,t){e.exports=window.wp.element},function(e,t){e.exports=window.wp.i18n},function(e,t,r){e.exports=r(39)()},function(e,t){e.exports=window.lodash},function(e,t){e.exports=window.wc.components},function(e,t){e.exports=window.wc.data},function(t,e){function r(e){return t.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},t.exports.default=t.exports,t.exports.__esModule=!0,r(e)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},function(e,t){e.exports=window.wc.navigation},function(e,t){e.exports=window.wc.wcSettings},function(e,t){e.exports=window.wc.number},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,r){var o=r(38);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,r){var o=r(21).default,n=r(18);e.exports=function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return n(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.wc.date},function(e,t){e.exports=window.wp.hooks},function(e,t){e.exports=window.wp.data},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,r){var o=r(35),n=r(36),a=r(29),c=r(37);e.exports=function(e){return o(e)||n(e)||a(e)||c()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.wp.compose},function(t,e){function r(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=r=function(e){return typeof e}:t.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.exports.default=t.exports,t.exports.__esModule=!0,r(e)}t.exports=r,t.exports.default=t.exports,t.exports.__esModule=!0},function(e,t){e.exports=window.wp.htmlEntities},function(e,t){e.exports=window.wp.components},function(e,t){e.exports=window.wc.csvExport},function(e,t){e.exports=window.wc.currency},function(e,t){e.exports=window.wp.date},function(e,t,r){var c=r(44);e.exports=function(e,t){if(null==e)return{};var r,o=c(e,t);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),a=0;a<n.length;a++)r=n[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r]);return o},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,r){var o=r(28);e.exports=function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.wp.apiFetch},function(e,t){e.exports=window.wp.url},function(e,t){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,o=arguments[t];for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r])}return e},e.exports.default=e.exports,e.exports.__esModule=!0,r.apply(this,arguments)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,r){var o=r(41),n=r(42),a=r(29),c=r(43);e.exports=function(e,t){return o(e)||n(e,t)||a(e,t)||c()},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=window.wp.dom},function(e,t,r){var o=r(28);e.exports=function(e){if(Array.isArray(e))return o(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(r,e){function o(e,t){return r.exports=o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r.exports.default=r.exports,r.exports.__esModule=!0,o(e,t)}r.exports=o,r.exports.default=r.exports,r.exports.__esModule=!0},function(e,t,r){"use strict";var c=r(40);function o(){}function n(){}n.resetWarningCache=o,e.exports=function(){function e(e,t,r,o,n,a){if(a!==c){a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}var r={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:n,resetWarningCache:o};return r.PropTypes=r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){e.exports=function(e){if(Array.isArray(e))return e},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a=[],c=!0,s=!1;try{for(r=r.call(e);!(c=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);c=!0);}catch(e){s=!0,n=e}finally{try{c||null==r.return||r.return()}finally{if(s)throw n}}return a}},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t){e.exports=function(e,t){if(null==e)return{};for(var r,o={},n=Object.keys(e),a=0;a<n.length;a++)r=n[a],0<=t.indexOf(r)||(o[r]=e[r]);return o},e.exports.default=e.exports,e.exports.__esModule=!0},function(e,t,r){"use strict";r.r(t);var o=r(19),D=r.n(o),T=r(16),F=r(1),n=r(14),B=r.n(n),a=r(10),c=r.n(a),s=r(11),i=r.n(s),u=r(12),l=r.n(u),t=r(13),d=r.n(t),o=r(6),p=r.n(o),M=r(0),N=r(4),m=r(8),n=r(20),a=r(17),s=r(2),u=r.n(s),I=r(7),f=r(9),A=r(5),h=r(15),t=r(25),o=r.n(t),s=o()(m.CURRENCY),t=Object(M.createContext)(s);function b(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p()(r);return t=o?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)}}o=function(e){l()(r,e);var t=b(r);function r(){return c()(this,r),t.apply(this,arguments)}return i()(r,[{key:"formatVal",value:function(e,t){var r=this.context,o=r.formatAmount,r=r.getCurrencyConfig;return"currency"===t?o(e):Object(f.formatValue)(r(),t,e)}},{key:"getValues",value:function(e,t){var r=this.props,o=r.emptySearchResults,n=r.summaryData.totals,r=n.primary?n.primary[e]:0,e=n.secondary?n.secondary[e]:0,r=o?0:r,e=o?0:e;return{delta:Object(f.calculateDelta)(r,e),prevValue:this.formatVal(e,t),value:this.formatVal(r,t)}}},{key:"render",value:function(){var i=this,e=this.props,t=e.charts,r=e.query,u=e.selectedChart,o=e.summaryData,n=(e.endpoint,e.report,e.defaultDateRange),e=o.isError,o=o.isRequesting;if(!e){if(o)return Object(M.createElement)(N.SummaryListPlaceholder,{numberOfItems:t.length});var l=Object(h.getDateParamsFromQuery)(r,n).compare;return Object(M.createElement)(N.SummaryList,null,function(e){var s=e.onToggle;return t.map(function(e){var t=e.key,r=e.order,o=e.orderby,n=e.label,a=e.type,c={chart:t};o&&(c.orderby=o),r&&(c.order=r);e=Object(I.getNewPath)(c),o=u.key===t,r=i.getValues(t,a),c=r.delta,a=r.prevValue,r=r.value;return Object(M.createElement)(N.SummaryNumber,{key:t,delta:c,href:e,label:n,prevLabel:"previous_period"===l?Object(F.__)("Previous Period:","woocommerce-product-bundles"):Object(F.__)("Previous Year:","woocommerce-product-bundles"),prevValue:a,selected:o,value:r,onLinkClickCallback:function(){s&&s()}})})})}}}]),r}(M.Component);o.propTypes={charts:u.a.array.isRequired,endpoint:u.a.string.isRequired,query:u.a.object.isRequired,selectedChart:u.a.shape({key:u.a.string.isRequired,label:u.a.string.isRequired,order:u.a.oneOf(["asc","desc"]),orderby:u.a.string,type:u.a.oneOf(["average","number","currency"]).isRequired}).isRequired,summaryData:u.a.object,report:u.a.string},o.defaultProps={summaryData:{totals:{primary:{},secondary:{}},isError:!1}},o.contextType=t;var y=Object(n.compose)(Object(a.withSelect)(function(e,t){var r=t.charts,o=t.endpoint,n=t.limitProperties,a=t.query,c=t.filters,s=t.advancedFilters,t=n||[o],n=t.some(function(e){return a[e]&&a[e].length});if(a.search&&!n)return{emptySearchResults:!0};n=r&&r.map(function(e){return e.key}),r=e(A.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range;return{summaryData:Object(A.getSummaryNumbers)({endpoint:o,query:a,select:e,limitBy:t,filters:c,advancedFilters:s,defaultDateRange:r,fields:n}),defaultDateRange:r}}))(o),g=r(26),L=r(3);function _(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p()(r);return t=o?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)}}s=function(e){l()(r,e);var t=_(r);function r(){return c()(this,r),t.apply(this,arguments)}return i()(r,[{key:"render",value:function(){var e,t,r,o,n=this.props,a=n.className,c=n.isError,n=n.isEmpty;return c?(e=Object(F.__)("There was an error getting your stats. Please try again.","woocommerce-product-bundles"),t=Object(F.__)("Reload","woocommerce-product-bundles"),o=function(){window.location.reload()}):n&&(e=Object(F.__)("No results could be found for this date range.","woocommerce-product-bundles"),t=Object(F.__)("View Orders","woocommerce-product-bundles"),r=Object(m.getAdminLink)("edit.php?post_type=shop_order")),Object(M.createElement)(N.EmptyContent,{className:a,title:e,actionLabel:t,actionURL:r,actionCallback:o})}}]),r}(M.Component);s.propTypes={className:u.a.string,isError:u.a.bool,isEmpty:u.a.bool},s.defaultProps={className:""};var V=s;function O(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?O(Object(r),!0).forEach(function(e){B()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function j(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p()(r);return t=o?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)}}o=function(e){l()(r,e);var t=j(r);function r(){return c()(this,r),t.apply(this,arguments)}return i()(r,[{key:"shouldComponentUpdate",value:function(e){return e.isRequesting!==this.props.isRequesting||e.primaryData.isRequesting!==this.props.primaryData.isRequesting||e.secondaryData.isRequesting!==this.props.secondaryData.isRequesting||!Object(L.isEqual)(e.query,this.props.query)}},{key:"getItemChartData",value:function(){var e=this.props,t=e.primaryData,o=e.selectedChart;return t.data.intervals.map(function(e){var r={};return e.subtotals.segments.forEach(function(e){var t;e.segment_label&&(t=r[e.segment_label]?e.segment_label+" (#"+e.segment_id+")":e.segment_label,r[e.segment_id]={label:t,value:e.subtotals[o.key]||0})}),v({date:Object(g.format)("Y-m-d\\TH:i:s",e.date_start)},r)})}},{key:"getTimeChartData",value:function(){var e=this.props,o=e.query,t=e.primaryData,n=e.secondaryData,a=e.selectedChart,e=e.defaultDateRange,c=Object(h.getIntervalForQuery)(o),e=Object(h.getCurrentDates)(o,e),s=e.primary,i=e.secondary;return t.data.intervals.map(function(e,t){var r=Object(h.getPreviousDate)(e.date_start,s.after,i.after,o.compare,c),t=n.data.intervals[t];return{date:Object(g.format)("Y-m-d\\TH:i:s",e.date_start),primary:{label:"".concat(s.label," (").concat(s.range,")"),labelDate:e.date_start,value:e.subtotals[a.key]||0},secondary:{label:"".concat(i.label," (").concat(i.range,")"),labelDate:r.format("YYYY-MM-DD HH:mm:ss"),value:t&&t.subtotals[a.key]||0}}})}},{key:"getTimeChartTotals",value:function(){var e=this.props,t=e.primaryData,r=e.secondaryData,e=e.selectedChart;return{primary:Object(L.get)(t,["data","totals",e.key],null),secondary:Object(L.get)(r,["data","totals",e.key],null)}}},{key:"renderChart",value:function(e,t,r,o){var n=this.props,a=n.emptySearchResults,c=n.filterParam,s=n.interactiveLegend,i=n.itemsLabel,u=n.legendPosition,l=n.path,d=n.query,p=n.selectedChart,m=n.showHeaderControls,f=n.primaryData,b=Object(h.getIntervalForQuery)(d),y=Object(h.getAllowedIntervalsForQuery)(d),g=Object(h.getDateFormatsForInterval)(b,f.data.intervals.length),n=a?Object(F.__)("No data for the current search","woocommerce-admin"):Object(F.__)("No data for the selected date range","woocommerce-admin"),f=this.context,a=f.formatAmount,f=f.getCurrencyConfig;return Object(M.createElement)(N.Chart,{allowedIntervals:y,data:r,dateParser:"%Y-%m-%dT%H:%M:%S",emptyMessage:n,filterParam:c,interactiveLegend:s,interval:b,isRequesting:t,itemsLabel:i,legendPosition:u,legendTotals:o,mode:e,path:l,query:d,screenReaderFormat:g.screenReaderFormat,showHeaderControls:m,title:p.label,tooltipLabelFormat:g.tooltipLabelFormat,tooltipTitle:"time-comparison"===e&&p.label||null,tooltipValueFormat:Object(A.getTooltipValueFormat)(p.type,a),chartType:Object(h.getChartTypeForQuery)(d),valueType:p.type,xFormat:g.xFormat,x2Format:g.x2Format,currency:f()})}},{key:"renderItemComparison",value:function(){var e=this.props,t=e.isRequesting,e=e.primaryData;if(e.isError)return Object(M.createElement)(V,{isError:!0});t=t||e.isRequesting,e=this.getItemChartData();return this.renderChart("item-comparison",t,e)}},{key:"renderTimeComparison",value:function(){var e=this.props,t=e.isRequesting,r=e.primaryData,e=e.secondaryData;if(!r||r.isError||e.isError)return Object(M.createElement)(V,{isError:!0});t=t||r.isRequesting||e.isRequesting,r=this.getTimeChartData(),e=this.getTimeChartTotals();return this.renderChart("time-comparison",t,r,e)}},{key:"render",value:function(){return"item-comparison"===this.props.mode?this.renderItemComparison():this.renderTimeComparison()}}]),r}(M.Component);o.contextType=t,o.propTypes={filters:u.a.array,isRequesting:u.a.bool,itemsLabel:u.a.string,limitProperties:u.a.array,mode:u.a.string,path:u.a.string.isRequired,primaryData:u.a.object,query:u.a.object.isRequired,secondaryData:u.a.object,selectedChart:u.a.shape({key:u.a.string.isRequired,label:u.a.string.isRequired,order:u.a.oneOf(["asc","desc"]),orderby:u.a.string,type:u.a.oneOf(["average","number","currency"]).isRequired}).isRequired},o.defaultProps={isRequesting:!1,primaryData:{data:{intervals:[]},isError:!1,isRequesting:!1},secondaryData:{data:{intervals:[]},isError:!1,isRequesting:!1}};var w=Object(n.compose)(Object(a.withSelect)(function(e,t){var r=t.charts,o=t.endpoint,n=t.filters,a=t.isRequesting,c=t.limitProperties,s=t.query,i=t.advancedFilters,u=c||[o],l=function e(t,r,o){var n=2<arguments.length&&void 0!==o?o:{};if(!t||0===t.length)return null;var a=t.slice(0),o=a.pop();if(o.showFilters(r,n))return t=Object(I.flattenFilters)(o.filters),o=r[o.param]||o.defaultValue||"all",Object(L.find)(t,{value:o});return e(a,r,n)}(n,s),d=Object(L.get)(l,["settings","param"]),c=t.mode||function(e,t){if(e&&t){var r=Object(L.get)(e,["settings","param"]);if(!r||Object.keys(t).includes(r))return Object(L.get)(e,["chartMode"])}return null}(l,s)||"time-comparison",t=e(A.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range,l=e(A.REPORTS_STORE_NAME),d={mode:c,filterParam:d,defaultDateRange:t};if(a)return d;a=u.some(function(e){return s[e]&&s[e].length});if(s.search&&!a)return v(v({},d),{},{emptySearchResults:!0});a=r&&r.map(function(e){return e.key}),r=Object(A.getReportChartData)({endpoint:o,dataType:"primary",query:s,select:e,selector:l,limitBy:u,filters:n,advancedFilters:i,defaultDateRange:t,fields:a});if("item-comparison"===c)return v(v({},d),{},{primaryData:r});a=Object(A.getReportChartData)({endpoint:o,dataType:"secondary",query:s,select:e,selector:l,limitBy:u,filters:n,advancedFilters:i,defaultDateRange:t,fields:a});return v(v({},d),{},{primaryData:r,secondaryData:a})}))(o),s=r(30),x=r.n(s),R=r(31);function S(e,t){t=1<arguments.length&&void 0!==t?t:[],e=Object(L.find)(t,{key:e});return e||t[0]}function Q(){return Object(M.createElement)("svg",{role:"img","aria-hidden":"true",focusable:"false",version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 24 24"},Object(M.createElement)("path",{d:"M18,9c-0.009,0-0.017,0.002-0.025,0.003C17.72,5.646,14.922,3,11.5,3C7.91,3,5,5.91,5,9.5c0,0.524,0.069,1.031,0.186,1.519 C5.123,11.016,5.064,11,5,11c-2.209,0-4,1.791-4,4c0,1.202,0.541,2.267,1.38,3h18.593C22.196,17.089,23,15.643,23,14 C23,11.239,20.761,9,18,9z M12,16l-4-5h3V8h2v3h3L12,16z"}))}var o=r(18),C=r.n(o),s=r(21),o=r.n(s),k=r(22),s=r(32),H=r.n(s),s=r(33),U=r.n(s),s=r(27),Y=r.n(s),K=r(23),W=r(34),z=r(24);var G=["getHeadersContent","getRowsContent","getSummary","isRequesting","primaryData","tableData","endpoint","itemIdField","tableQuery","compareBy","compareParam","searchBy","labels"],X=["updateUserPreferences"];function E(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function $(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach(function(e){B()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function q(c){var o=c.getHeadersContent,n=c.getRowsContent,a=c.getSummary,e=c.isRequesting,t=c.primaryData,r=c.tableData,s=c.endpoint,i=(c.itemIdField,c.tableQuery,c.compareBy),u=c.compareParam,l=c.searchBy,d=void 0===(x=c.labels)?{}:x,p=Y()(c,G),m=c.query,f=c.columnPrefsKey,b=r.items,y=r.query,g=m[u]?Object(I.getIdsFromQuery)(m[i]):[],h=Object(M.useState)(g),_=(k=U()(h,2))[0],O=k[1],v=Object(M.useRef)(null),j=Object(A.useUserPreferences)(),w=j.updateUserPreferences,x=Y()(j,X);if(r.isError||t.isError)return Object(M.createElement)(V,{isError:!0});function R(e,t,r){return r=a?a(t,r):null,Object(T.applyFilters)("woocommerce_admin_report_table",{endpoint:s,headers:o(),rows:n(e),totals:t,summary:r,items:b})}function S(e){var t=c.ids;O(e?t:[])}function C(e,t){var r=c.ids;t?O(Object(L.uniq)([r[e]].concat(D()(_)))):(e=_.indexOf(r[e]),O([].concat(D()(_.slice(0,e)),D()(_.slice(e+1)))))}g=[],f&&(g=x&&x[f]?x[f]:g);var h=e||r.isRequesting||t.isRequesting,k=Object(L.get)(t,["data","totals"],{}),x=0<(j=b.totalResults||0),e=Object(I.getSearchWords)(m).map(function(e){return{key:e,label:e}}),r=b.data,E=(t=R(r,k,j)).headers,r=t.rows,k=t.summary;i&&(r=r.map(function(e,t){return[(r=t,t=c.ids,t=-1!==_.indexOf((void 0===t?[]:t)[r]),{display:Object(M.createElement)(K.CheckboxControl,{onChange:Object(L.partial)(C,r),checked:t}),value:!1})].concat(D()(e));var r}),E=[(P=c.ids,t=(P=0<(t=void 0===P?[]:P).length)&&t.length===_.length,{cellClassName:"is-checkbox-column",key:"compare",label:Object(M.createElement)(K.CheckboxControl,{onChange:S,"aria-label":Object(F.__)("Select All"),checked:t,disabled:!P}),required:!0})].concat(D()(E)));var q,P=(P=E,(q=g)?P.map(function(e){return $($({},e),{},{visible:e.required||!q.includes(e.key)})}):P.map(function(e){return $($({},e),{},{visible:e.required||!e.hiddenByDefault})}));return Object(M.createElement)(M.Fragment,null,Object(M.createElement)("div",{className:"woocommerce-report-table__scroll-point",ref:v,"aria-hidden":!0}),Object(M.createElement)(N.TableCard,H()({className:"woocommerce-report-table-"+s.replace("/","-"),hasSearch:!!l,actions:[i&&Object(M.createElement)(N.CompareButton,{key:"compare",className:"woocommerce-table__compare",count:_.length,helpText:d.helpText||Object(F.__)("Check at least two items below to compare","woocommerce-admin"),onClick:function(){i&&Object(I.onQueryChange)("compare")(i,u,_.join(","))},disabled:!x},d.compareButton||Object(F.__)("Compare","woocommerce-admin")),l&&Object(M.createElement)(N.Search,{allowFreeTextSearch:!0,inlineTags:!0,key:"search",onChange:function(e){var t=c.baseSearchQuery,r=e.map(function(e){return e.label.replace(",","%2C")});r.length?Object(I.updateQueryString)($($((e={filter:void 0},B()(e,u,void 0),B()(e,l,void 0),e),t),{},{search:Object(L.uniq)(r).join(",")})):Object(I.updateQueryString)({search:void 0})},placeholder:d.placeholder||Object(F.__)("Search by item name","woocommerce-admin"),selected:e,showClearButton:!0,type:l,disabled:!x}),x&&Object(M.createElement)(K.Button,{key:"download",className:"woocommerce-table__download-button",disabled:h,onClick:function(){var t=c.createNotice,e=c.startExport,r=c.title,o=Object.assign({},m),n=b.data,a=b.totalResults;delete o.extended_info,o.search&&delete o[l],n&&n.length===a?(a=(n=R(n,a)).headers,n=n.rows,Object(z.downloadCSVFile)(Object(z.generateCSVFileName)(r,o),Object(z.generateCSVDataFromTable)(a,n))):e(s,y).then(function(){return t("success",Object(F.sprintf)(Object(F.__)("Your %s Report will be emailed to you.","woocommerce-admin"),r))}).catch(function(e){return t("error",e.message||Object(F.sprintf)(Object(F.__)("There was a problem exporting your %s Report. Please try again.","woocommerce-admin"),r))})}},Object(M.createElement)(Q,null),Object(M.createElement)("span",{className:"woocommerce-table__download-button__label"},d.downloadButton||Object(F.__)("Download","woocommerce-admin")))],headers:P,isLoading:h,onQueryChange:I.onQueryChange,onColumnsChange:function(t,e){var r=E.map(function(e){return e.key}).filter(function(e){return!t.includes(e)});f&&(r=B()({},f,r),w(r))},onSort:function(e,t){Object(I.onQueryChange)("sort")(e,t)},onPageChange:function(e,t){v.current.scrollIntoView();var r=v.current.nextSibling.querySelector(".woocommerce-table__table"),r=W.focus.focusable.find(r);r.length&&r[0].focus()},rows:r,rowsPerPage:parseInt(y.per_page,10)||A.QUERY_DEFAULTS.pageSize,summary:k,totalRows:j},p)))}q.propTypes={baseSearchQuery:u.a.object,compareBy:u.a.string,compareParam:u.a.string,columnPrefsKey:u.a.string,endpoint:u.a.string,getHeadersContent:u.a.func.isRequired,getRowsContent:u.a.func.isRequired,getSummary:u.a.func,itemIdField:u.a.string,labels:u.a.shape({compareButton:u.a.string,downloadButton:u.a.string,helpText:u.a.string,placeholder:u.a.string}),primaryData:u.a.object,searchBy:u.a.string,summaryFields:u.a.arrayOf(u.a.string),tableData:u.a.object.isRequired,tableQuery:u.a.object,title:u.a.string.isRequired},q.defaultProps={primaryData:{},tableData:{items:{data:[],totalResults:0},query:{}},tableQuery:{},compareParam:"filter",downloadable:!1,onSearch:L.noop,baseSearchQuery:{}};var P={},J=Object(n.compose)(Object(a.withSelect)(function(e,t){var r=t.endpoint,o=t.getSummary,n=t.isRequesting,a=(t.itemIdField,t.query),c=t.tableData,s=t.tableQuery,i=t.filters,u=t.advancedFilters,l=t.summaryFields,d=t.extendedItemsStoreName,t=e(A.SETTINGS_STORE_NAME).getSetting("wc_admin","wcAdminSettings").woocommerce_default_date_range;if(n)return P;n=e(A.REPORTS_STORE_NAME);d&&e(d);return{primaryData:o?Object(A.getReportChartData)({endpoint:r,dataType:"primary",query:a,select:e,selector:n,filters:i,advancedFilters:u,defaultDateRange:t,fields:l}):P,tableData:c||Object(A.getReportTableData)({endpoint:r,query:a,select:e,selector:n,tableQuery:s,filters:i,advancedFilters:u,defaultDateRange:t}),query:a}}),Object(a.withDispatch)(function(e){var t=e(A.EXPORT_STORE_NAME).startExport;return{createNotice:e("core/notices").createNotice,startExport:t}}))(q);function Z(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p()(r);return t=o?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)}}var a=Object(m.getSetting)("admin",{}),ee="object"===o()(a)&&1!==a.length&&a.stockStatuses?a.stockStatuses:Object(m.getSetting)("stockStatuses",{}),a=function(e){l()(r,e);var t=Z(r);function r(){var e;return c()(this,r),(e=t.call(this)).getHeadersContent=e.getHeadersContent.bind(C()(e)),e.getRowsContent=e.getRowsContent.bind(C()(e)),e.getSummary=e.getSummary.bind(C()(e)),e}return i()(r,[{key:"getHeadersContent",value:function(){return[{label:Object(F.__)("Bundle Title","woocommerce-product-bundles"),key:"product_name",required:!0,isLeftAligned:!0,isSortable:!0},{label:Object(F.__)("SKU","woocommerce-product-bundles"),key:"sku",hiddenByDefault:!0,isSortable:!0},{label:Object(F.__)("Bundles Sold","woocommerce-product-bundles"),key:"items_sold",required:!0,defaultSort:!0,isSortable:!0,isNumeric:!0},{label:Object(F.__)("Bundled Items Sold","woocommerce-product-bundles"),key:"bundled_items_sold",required:!0,defaultSort:!0,isSortable:!0,isNumeric:!0},{label:Object(F.__)("Net Sales","woocommerce-product-bundles"),screenReaderLabel:Object(F.__)("Net Sales","woocommerce-product-bundles"),key:"net_revenue",required:!0,isSortable:!0,isNumeric:!0},{label:Object(F.__)("Orders","woocommerce-product-bundles"),key:"orders_count",isSortable:!0,isNumeric:!0},{label:Object(F.__)("Status","woocommerce-product-bundles"),key:"stock_status"}].filter(Boolean)}},{key:"getRowsContent",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=this.props.query,l=Object(I.getPersistedQuery)(t),t=this.context,d=t.render,p=t.formatDecimal,m=(0,t.getCurrencyConfig)();return Object(L.map)(e,function(e){var t=e.product_id,r=e.items_sold,o=e.bundled_items_sold,n=e.net_revenue,a=e.orders_count,c=e.extended_info||{},s=c.sku,i=c.stock_status,u=Object(k.decodeEntities)(c.name),e=Object(I.getNewPath)(l,"/analytics/orders",{filter:"advanced",product_includes:t}),c=Object(I.getNewPath)(l,"/analytics/products",{filter:"single_product",products:t}),t="insufficientstock"===i?Object(F.__)("Insufficient Stock","woocommerce-product-bundles"):ee[i];return[{display:Object(M.createElement)(N.Link,{href:c,type:"wc-admin"},u),value:u},{display:s,value:s},{display:Object(f.formatValue)(m,"number",r),value:r},{display:Object(f.formatValue)(m,"number",o),value:o},{display:d(n),value:p(n)},{display:Object(M.createElement)(N.Link,{href:e,type:"wc-admin"},a),value:a},{display:t,value:i}].filter(Boolean)})}},{key:"getSummary",value:function(e){var t=e.products_count,r=void 0===t?0:t,o=e.items_sold,n=void 0===o?0:o,a=e.bundled_items_sold,c=void 0===a?0:a,t=e.net_revenue,o=void 0===t?0:t,a=e.orders_count,t=void 0===a?0:a,e=this.context,a=e.formatAmount,e=(0,e.getCurrencyConfig)();return[{label:Object(F._n)("bundle","bundles",r,"woocommerce-product-bundles"),value:Object(f.formatValue)(e,"number",r)},{label:Object(F._n)("sale","sales",n,"woocommerce-product-bundles"),value:Object(f.formatValue)(e,"number",n)},{label:Object(F._n)("bundled item sold","bundled items sold",c,"woocommerce-product-bundles"),value:Object(f.formatValue)(e,"number",c)},{label:Object(F.__)("net sales","woocommerce-product-bundles"),value:a(o)},{label:Object(F._n)("order","orders",t,"woocommerce-product-bundles"),value:Object(f.formatValue)(e,"number",t)}]}},{key:"render",value:function(){var e=this.props,t=e.filters,r=e.isRequesting,o=e.hideCompare,e=e.query;return Object(M.createElement)(J,{endpoint:"bundles",getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,getSummary:this.getSummary,summaryFields:["products_count","items_sold","bundled_items_sold","net_revenue","orders_count"],itemIdField:"product_id",isRequesting:r,query:e,compareBy:o?void 0:"bundles",tableQuery:{orderby:e.orderby||"items_sold",order:e.order||"desc",extended_info:!0,segmentby:e.segmentby},title:Object(F.__)("Bundles","woocommerce-product-bundles"),columnPrefsKey:"bundles_report_columns",filters:t})}}]),r}(M.Component);a.contextType=t;var te=a;function re(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p()(r);return t=o?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)}}var a=Object(m.getSetting)("admin",{}),oe="object"===o()(a)&&1!==a.length&&a.stockStatuses?a.stockStatuses:Object(m.getSetting)("stockStatuses",{}),a=function(e){l()(r,e);var t=re(r);function r(){var e;return c()(this,r),(e=t.call(this)).getHeadersContent=e.getHeadersContent.bind(C()(e)),e.getRowsContent=e.getRowsContent.bind(C()(e)),e}return i()(r,[{key:"getHeadersContent",value:function(){return[{label:Object(F.__)("Bundle","woocommerce-product-bundles"),key:"bundle_name",required:!0,defaultSort:!0,isSortable:!0,isLeftAligned:!0},{label:Object(F.__)("Bundled Product","woocommerce-product-bundles"),key:"product_name",isSortable:!0},{label:Object(F.__)("Stock Status","woocommerce-product-bundles"),key:"stock_status"},{label:Object(F.__)("Remaining Stock","woocommerce-product-bundles"),key:"stock_quantity",isSortable:!1},{label:Object(F.__)("Required Stock","woocommerce-product-bundles"),key:"units_required",isSortable:!0,required:!0,isNumeric:!0}].filter(Boolean)}},{key:"getRowsContent",value:function(){var u=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=(this.props.query,this.context),l=(t.render,t.formatDecimal,(0,t.getCurrencyConfig)());return Object(L.map)(e,function(e){var t=e.bundle_id,r=e.product_id,o=e.extended_info||{},n=(o.sku,o.name),a=o.manage_stock,c=o.stock_quantity,s=o.bundle_name,i=o.units_required,e=o.stock_status,o=Object(k.decodeEntities)(s),s=Object(m.getAdminLink)("post.php?post="+t+"&action=edit"),t=Object(k.decodeEntities)(n),n=Object(m.getAdminLink)("post.php?post="+r+"&action=edit"),r=oe[e];return[{display:Object(M.createElement)(N.Link,{href:s,type:"wp-admin"},o),value:o},{display:Object(M.createElement)(N.Link,{href:n,type:"wp-admin"},t),value:t},{display:r,value:oe[e]},{display:a?Object(f.formatValue)(u.context.getCurrencyConfig(),"number",c):Object(F.__)("N/A","woocommerce-product-bundles"),value:c},{display:Object(f.formatValue)(l,"number",i),value:i}].filter(Boolean)})}},{key:"render",value:function(){var e=this.props,t=e.filters,r=e.isRequesting,o=e.hideCompare,e=e.query;return Object(M.createElement)(J,{endpoint:"bundles/stock",getHeadersContent:this.getHeadersContent,getRowsContent:this.getRowsContent,itemIdField:"product_id",isRequesting:r,query:e,compareBy:o?void 0:"bundles",tableQuery:{orderby:e.orderby||"product_name",order:e.order||"asc",extended_info:!0,segmentby:e.segmentby},title:Object(F.__)("Stock","woocommerce-product-bundles"),columnPrefsKey:"bundles_stock_report_columns",filters:t})}}]),r}(M.Component);a.contextType=t;var ne=a,a=function(r,e){var o=1<arguments.length&&void 0!==e?e:identity;return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=r,e=Object(I.getIdsFromQuery)(e);if(e.length<1)return Promise.resolve([]);e={include:e.join(","),per_page:e.length};return x()({path:Object(R.addQueryArgs)(t,e)}).then(function(e){return e.map(o)})}}(A.NAMESPACE+"/products",function(e){return{key:e.id,label:e.name}}),ae=Object(T.applyFilters)("woocommerce_admin_bundles_report_charts",[{key:"items_sold",label:Object(F.__)("Bundles Sold","woocommerce-product-bundles"),order:"desc",orderby:"items_sold",type:"number"},{key:"bundled_items_sold",label:Object(F.__)("Bundled Items Sold","woocommerce-product-bundles"),order:"desc",orderby:"bundled_items_sold",type:"number"},{key:"net_revenue",label:Object(F.__)("Net Sales","woocommerce-product-bundles"),order:"desc",orderby:"net_revenue",type:"currency"},{key:"orders_count",label:Object(F.__)("Orders","woocommerce-product-bundles"),order:"desc",orderby:"orders_count",type:"number"}]),ce=[{label:Object(F.__)("View","woocommerce-product-bundles"),staticParams:["filter","products"],param:"section",showFilters:function(){return!0},filters:[{label:Object(F.__)("Revenue","woocommerce-product-bundles"),value:"all"},{label:Object(F.__)("Stock","woocommerce-product-bundles"),value:"stock"}]},{label:Object(F.__)("Show","woocommerce-product-bundles"),staticParams:["section","paged","per_page"],param:"filter",showFilters:function(){return!0},filters:[{label:Object(F.__)("All Bundles","woocommerce-product-bundles"),value:"all"},{label:Object(F.__)("Single Bundle","woocommerce-product-bundles"),value:"select_bundle",subFilters:[{component:"Search",value:"single_product",path:["select_bundle"],settings:{type:"products",param:"products",getLabels:a,labels:{placeholder:Object(F.__)("Type to search for a bundle","woocommerce-product-bundles"),button:Object(F.__)("Single Bundle","woocommerce-product-bundles")}}}]}]}];function se(t,e){var r,o=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),o.push.apply(o,r)),o}function ie(r){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=p()(r);return t=o?(e=p()(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),d()(this,t)}}Object(m.getSetting)("manageStock","no");a=function(e){l()(r,e);var t=ie(r);function r(){return c()(this,r),t.apply(this,arguments)}return i()(r,[{key:"getChartMeta",value:function(){var e=this.props;e.query,e.isSingleProductView;return{itemsLabel:Object(F.__)("%d bundles","woocommerce-product-bundles"),mode:"time-comparison"}}},{key:"render",value:function(){var e=this.getChartMeta(),t=e.itemsLabel,r=e.mode,o=this.props,n=o.path,a=o.query,c=o.isError,e=o.isRequesting;if(c)return Object(M.createElement)(ReportError,{isError:!0});o=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?se(Object(r),!0).forEach(function(e){B()(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},a),c="stock"!==a.section,e="stock"!==a.section?Object(M.createElement)(M.Fragment,null,Object(M.createElement)(y,{mode:r,charts:ae,endpoint:"bundles",isRequesting:e,query:o,selectedChart:S(a.chart,ae),filters:ce}),Object(M.createElement)(w,{charts:ae,mode:r,endpoint:"bundles",isRequesting:e,itemsLabel:t,path:n,query:o,selectedChart:S(o.chart,ae),filters:ce}),Object(M.createElement)(te,{isRequesting:e,hideCompare:!0,query:a,filters:ce})):Object(M.createElement)(M.Fragment,null,Object(M.createElement)("p",null,Object(M.createInterpolateElement)(Object(F.__)("Use this report to identify Bundles with <strong>Insufficient Stock</strong>, and re-stock their contents.","woocommerce-product-bundles"),{strong:Object(M.createElement)("strong",null)})),Object(M.createElement)(ne,{isRequesting:e,hideCompare:!0,query:a,filters:ce}));return Object(M.createElement)(M.Fragment,null,Object(M.createElement)(N.ReportFilters,{query:a,path:n,showDatePicker:!1,filters:ce}),Object(M.createElement)(N.ReportFilters,{query:a,path:n,showDatePicker:c}),e)}}]),r}(M.Component);a.propTypes={path:u.a.string.isRequired,query:u.a.object.isRequired};var ue=a;Object(T.addFilter)("woocommerce_admin_reports_list","woocommerce-product-bundles",function(e){return[].concat(D()(e),[{report:"bundles",title:Object(F._x)("Bundles","analytics report table","woocommerce-product-bundles"),component:ue,navArgs:{id:"wc-pb-bundles-analytics-report"}}])})}]);