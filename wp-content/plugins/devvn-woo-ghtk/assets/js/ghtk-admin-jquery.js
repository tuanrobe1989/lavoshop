function copyToClipboard(t){var e=jQuery("<input>");jQuery("body").append(e),jQuery(t).addClass("copying"),setTimeout(function(){jQuery(t).removeClass("copying")},300),e.val(jQuery(t).html()).select(),document.execCommand("copy"),e.remove()}function selectOnlyThis(t){var e=document.getElementsByClassName("pick_ismain_onlyone");Array.prototype.forEach.call(e,function(t){t.checked=!1}),t.checked=!0}!function(t,e){t(document).ready(function(){admin_ghtk_array.formatNoMatches;function a(e,a){a||(a="Loading..."),t(e).html("");var n=new Option(a,"");t(e).append(n)}t("body").on("change",".devvn_pick_province",function(e){var n=t(this).closest("tr"),o=t(".devvn_pick_district",n),i=t(".devvn_pick_ward",n);t("option",o).val("");var s=e.val;s||(s=t("option:selected",this).val()),s&&!loading_shipping&&(loading_shipping=!0,t.ajax({type:"post",dataType:"json",url:admin_ghtk_array.get_address,data:{action:"load_diagioihanhchinh",matp:s},context:this,beforeSend:function(){a(o),a(i)},success:function(e){if(loading_shipping=!1,a(i,"Chọn xã/phường/thị trấn"),e.success){t(o).html("");var n=e.data,s=new Option("Chọn quận/huyện","");t(o).append(s),t.each(n,function(e,a){var n=new Option(a.name,a.maqh);t(o).append(n)})}}}))}),t("body").on("change",".devvn_pick_district",function(e){var n=e.val,o=t(this).closest("tr"),i=t(this),s=t(".devvn_pick_ward",o);n||(n=t("option:selected",i).val()),n&&t.ajax({type:"post",dataType:"json",url:admin_ghtk_array.get_address,data:{action:"load_diagioihanhchinh",maqh:n},context:this,beforeSend:function(){a(s)},success:function(e){if(t(s).html(""),e.success){var a=e.data,n=new Option("Chọn xã/phường/thị trấn","");t(s).append(n),t.each(a,function(e,a){var n=new Option(a.name,a.xaid);t(s).append(n)})}}})}),t("body").on("change",'input[name="devvn_ghtk_isfreeship"]',function(){var e=t(this).closest(".devvn_ghtk_popup_box"),a=t('input[name="devvn_ghtk_isfreeship"]:checked',e).val(),n=t("#devvn_ghtk_thuho",e),o=n.data("total"),i=n.data("subtotal");1==a?n.val(o):n.val(i),t("#khach_da_bank",e).is(":checked")&&n.val(0)}),t("body").on("click",".dang_order_ghtk",function(){var e=t(this).closest(".devvn_ghtk_popup_box"),a=t("#ghtk_nonce",e).val(),n=t(".post_ID",e).val(),o=t("#devvn_ghtk_thuho",e).val(),i=t("#devvn_ghtk_note",e).val(),s=t("#ghtk_total_weight",e).val(),d=t("#hamlet",e).val(),c=t("#devvn_ghtk_pick_date",e).val(),h=t("#devvn_ghtk_pick_work_shift option:selected",e).val(),r=t("#devvn_ghtk_giatridon",e).val(),_=t('input[name="devvn_ghtk_pick_option"]:checked',e).val(),l=t('input[name="devvn_ghtk_tags"]:checked',e).val(),v=t('input[name="devvn_ghtk_transport"]:checked',e).val(),u=t('input[name="devvn_ghtk_isfreeship"]:checked',e).val(),p=t("#shop_store_id option:selected",e).val(),g=t("#ghtk_xteam_services option:selected",e).val();return"xteam"!=v||g?(t.ajax({type:"post",dataType:"json",url:admin_ghtk_array.ajaxurl,data:{action:"dang_order_ghtk",orderid:n,nonce:a,thuho:o,note:i,pick_option:_,transport:v,shop_store_id:p,isfreeship:u,hamlet:d,pick_date:c,pick_work_shift:h,ghtk_total_weight:s,devvn_ghtk_giatridon:r,devvn_ghtk_tags:l,ghtk_xteam_services:g},context:this,beforeSend:function(){t(".devvn_ghtk_popup").addClass("ghtk_loading")},success:function(e){if(t(".devvn_ghtk_popup").removeClass("ghtk_loading"),e.success){t.magnificPopup.close();var a=e.data.html,o=e.data.text_status;a?(t("#devvn_ghtk_action_box_"+n).html(a).addClass("nhapnhay"),t("#ghtk_get_text_status_"+n).replaceWith(o),setTimeout(function(){t(".devvn_ghtk_action_box").removeClass("nhapnhay")},600)):alert("Đăng đơn thành công")}else alert(e.data)},error:function(e,a,n){t(".devvn_ghtk_popup").removeClass("ghtk_loading"),alert("Có lỗi khi đăng đơn")}}),!1):(alert("xFast2h cần phải chọn dịch vụ trước khi đăng đơn"),!1)}),t("body").on("click",".check_status_ghtk",function(){var e=t(this).closest(".devvn_ghtk_action_box"),a=t(this).data("nonce"),n=t(this).data("label"),o=t(this).data("orderid");return!(!n||!o)&&(t.ajax({type:"post",dataType:"json",url:admin_ghtk_array.ajaxurl,data:{action:"check_status_ghtk",label:n,nonce:a,orderid:o},context:this,beforeSend:function(){t(this).addClass("devvn_ghtk_loading")},success:function(a){t(this).removeClass("devvn_ghtk_loading"),t(".order_status_ghtk",e).html(a.data.content).addClass("nhapnhay"),setTimeout(function(){t(".order_status_ghtk",e).removeClass("nhapnhay")},600)}}),!1)}),t("body").on("click",".cancel_order_ghtk",function(){if(!confirm("Bạn có chắc chắn muốn hủy đơn này không?"))return!1;var e=t(this).closest(".devvn_ghtk_action_box"),a=t(this).data("nonce"),n=t(this).data("label"),o=t(this).data("orderid");return!(!n||!o)&&(t.ajax({type:"post",dataType:"json",url:admin_ghtk_array.ajaxurl,data:{action:"cancel_order_ghtk",label:n,nonce:a,orderid:o},context:this,beforeSend:function(){t(this).addClass("devvn_ghtk_loading")},success:function(a){t(this).removeClass("devvn_ghtk_loading"),a.success?(t(".order_status_ghtk",e).html(a.data).addClass("nhapnhay"),setTimeout(function(){t(".order_status_ghtk",e).removeClass("nhapnhay")},600)):alert(a.data)}}),!1)}),t("body .ghtk_add_url").on("click",function(){var e=t("#ghtk_hash").val();return t.ajax({type:"post",dataType:"json",url:admin_ghtk_array.ajaxurl,data:{action:"ghtk_add_url",hash:e},context:this,beforeSend:function(){t(this).addClass("devvn_ghtk_loading")},success:function(e){t(this).removeClass("devvn_ghtk_loading"),e.success?(alert(e.data),t("#submit").trigger("click")):alert(e.data)}}),!1}),t("body .ghtk_delete_url").on("click",function(){var e=t(this).data("url");return t.ajax({type:"post",dataType:"json",url:admin_ghtk_array.ajaxurl,data:{action:"ghtk_delete_url",url:e},context:this,beforeSend:function(){t(this).addClass("devvn_ghtk_loading")},success:function(e){t(this).removeClass("devvn_ghtk_loading"),e.success?(alert(e.data),t(this).closest("tr").remove()):alert(e.data)}}),!1}),t("body").on("click",".ghtk-upload",function(a){a.preventDefault();var n=t(this).parents(".svl-upload-image");meta_image_frame=e.media.frames.meta_image_frame=e.media({title:"Upload Image",button:{text:"Upload Image"},library:{type:"image"},multiple:!1}),meta_image_frame.on("select",function(){var t=meta_image_frame.state().get("selection").first().toJSON();if(t.id){t.sizes&&t.sizes.thumbnail?t.sizes.thumbnail.url:t.url;n.addClass("has-image"),n.find('input[type="hidden"]').val(t.id),n.find("img.image_view").attr("src",t.url)}}),meta_image_frame.open()}),t("body").on("click",".svl-delete-image",function(){var e=t(this).parents(".svl-upload-image");return e.removeClass("has-image"),e.find('input[type="hidden"]').val(""),!1});var n=e.template("ghtk-hubs-template");function o(e){var a=0;e.find("tr.ghtk_hubs_tr").each(function(e,n){t("input.text, input.checkbox, select.select, select, input",n).each(function(e,n){var o=t(n);o.attr("name",o.attr("name").replace(/\[\d\]/,"["+a+"]"))}),t(".hubs_stt",n).html(a+1),a++})}t(".ghtk_add_hubs").on("click",function(e){e.preventDefault();var a=t(".tbody_hubs"),i=a.find(".ghtk_hubs_tr").length||0;a.append(n({id:i})),o(a);var s=t("#ghtk_hubs_"+i).offset().top;t("html, body").animate({scrollTop:s-44},500)}),t("body").on("click",".ghtk_delete_hubs",function(){var e=t(this).closest(".ghtk_hubs_tr"),a=t(this).closest(".tbody_hubs");e.fadeOut(400,function(){e.remove(),o(a)})}),t("body").on("click",".devvn_ghtk_popup_button",function(){var e=t(this).data("orderid");t.ajax({type:"post",dataType:"json",url:admin_ghtk_array.ajaxurl,data:{action:"ghtk_creat_order_ajax",orderid:e},context:this,beforeSend:function(){t(this).addClass("devvn_ghtk_loading")},success:function(e){if(t(this).removeClass("devvn_ghtk_loading"),e.success){var a=e.data.html;t.magnificPopup.open({items:{src:a,type:"inline"},showCloseBtn:!1,callbacks:{open:function(){t("#devvn_ghtk_pick_date").datepicker({minDate:0,dateFormat:"yy/mm/dd"}),t('body input[name="devvn_ghtk_transport"]:checked').trigger("change")}}})}else alert("Error!")},error:function(e,a,n){t(this).removeClass("devvn_ghtk_loading"),alert("Error!")}})}),t("body").on("click","#devvn_ghtk_popup_close",function(){return t.magnificPopup.close(),!1}),t("body").on("click","#khach_da_bank",function(){t(this).is(":checked")?t("#devvn_ghtk_thuho").val(0):t('body input[name="devvn_ghtk_isfreeship"]').trigger("change")});var i=!1;t("body").on("click",".ghtk_active_license",function(){var e=t("#ghtk_license").val(),a=t(this).data("nonce"),n=t(this).closest("td");return e&&!i&&t.ajax({type:"post",dataType:"json",url:admin_ghtk_array.ajaxurl,data:{action:"active_ghtk_ghtk",license:e,nonce:a},context:this,beforeSend:function(){i=!0,t(".spinner",n).css({visibility:"visible"})},success:function(e){e.success?(alert(e.data),location.reload()):alert(e.data),i=!1,t(".spinner",n).css({visibility:"hidden"})},error:function(e,a,o){alert(a),i=!1,t(".spinner",n).css({visibility:"hidden"})}}),!1}),t(".delete_order").on("click",function(){if(confirm("Bạn có chắc chắn muốn xóa vĩnh viễn order này?")){var e=t(this).data("href");window.location.href=e}return!1}),t("body .ghtk_change_webhook_key").on("click",function(){var e=function(){for(var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=0;a<24;a++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}();return t("#ghtk_hash").val(e),t(".webhook_key").html(e),!1}),t("body").on("change",'input[name="devvn_ghtk_transport"], #shop_store_id',function(){var e=t(this).closest(".devvn_ghtk_popup_box"),a=t(".ghtk_xfast_services",e);"xteam"==t('input[name="devvn_ghtk_transport"]:checked',e).val()?function(e){var a=t("#ghtk_nonce",e).val(),n=t(".post_ID",e).val(),o=t("#shop_store_id option:selected",e).val(),i=t(".ghtk_xfast_services",e);t.ajax({type:"post",dataType:"json",url:admin_ghtk_array.ajaxurl,data:{action:"ghtk_find_services_xteam",orderid:n,nonce:a,shop_store_id:o},context:this,beforeSend:function(){t(".devvn_ghtk_popup").addClass("ghtk_loading")},success:function(e){t(".devvn_ghtk_popup").removeClass("ghtk_loading"),e.success?(i.show(),i.html(e.data)):(i.html(""),i.hide(),alert(e.data))},error:function(e,a,n){t(".devvn_ghtk_popup").removeClass("ghtk_loading"),alert("Có lỗi khi lấy dịch vụ xFast")}})}(e):(a.html(""),a.hide())})})}(jQuery,wp);